<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Accademia delle Lingue - Piattaforma Trinity - Nucleo Educativo per la Formazione Europea al Lavoro Internazionale - Sede di esame accreditata numero 68499 </title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #1e3a5f; --primary-dark: #152a45; --secondary: #8b0000;
            --success: #276749; --error: #c53030;
            --bg-primary: #f5f5f0; --bg-card: #ffffff; --border: #d4d4c8;
            --text-primary: #2c3e50; --text-secondary: #5a6c7d;
            --trinity-red: #dc2626; --trinity-blue: #1e3a5f;
            --level-a1: #276749; --level-a2: #2563eb; --level-b1: #c9a227;
            --level-b2: #dc2626; --level-c1: #6b21a8; --level-c2: #0f172a;
        }
        body { font-family: 'Georgia', 'Times New Roman', serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }

        /* Login Section */
        .login-section { min-height: 100vh; display: none; align-items: center; justify-content: center; background: var(--bg-primary); padding: 20px 10px; position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; }
        .login-section.active { display: flex; }
        .login-container { width: 100%; max-width: 320px; background: var(--bg-card); border: 1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; }
        .login-header { background: var(--primary); padding: 16px 12px; text-align: center; color: white; border-bottom: 2px solid var(--secondary); }
        .login-header h1 { font-size: 1rem; font-weight: normal; letter-spacing: 0.5px; margin-bottom: 2px; }
        .login-header p { font-size: 0.7rem; opacity: 0.9; margin: 0; }
        .login-body { padding: 16px; }
        .login-footer { padding: 10px; text-align: center; border-top: 1px solid var(--border); background: var(--bg-primary); }
        .login-footer p { font-size: 0.65rem; color: var(--text-secondary); margin: 0; }
        .form-group { margin-bottom: 10px; }
        .form-label { display: block; font-size: 0.7rem; font-weight: 600; margin-bottom: 3px; text-transform: uppercase; letter-spacing: 0.3px; }
        .form-input { width: 100%; padding: 8px 10px; border: 1px solid var(--border); font-size: 0.85rem; font-family: inherit; background: #fafafa; }
        .form-input:focus { outline: none; border-color: var(--primary); background: white; }
        .btn { width: 100%; padding: 10px; background: var(--primary); color: white; border: none; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-transform: uppercase; letter-spacing: 0.3px; transition: background 0.2s; margin-top: 4px; }
        .btn:hover { background: var(--primary-dark); }
        .alert { padding: 8px 10px; margin-bottom: 10px; font-size: 0.75rem; border-left: 3px solid; display: none; }
        .alert-error { background: #fed7d7; color: var(--error); border-left-color: var(--error); }
        .alert-success { background: #c6f6d5; color: var(--success); border-left-color: var(--success); }
        .signup-link { margin-top: 12px; text-align: center; }
        .signup-link a { color: var(--trinity-blue); text-decoration: none; font-weight: 600; font-size: 0.85rem; }
        .signup-link a:hover { text-decoration: underline; }

        /* Dashboard */
        .dashboard { display: none; min-height: 100vh; flex-direction: column; }
        .top-nav { background: var(--trinity-blue); color: white; padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between; border-bottom: 3px solid var(--trinity-red); flex-shrink: 0; }
        .main-container { display: flex; flex: 1; height: calc(100vh - 64px); overflow: hidden; }
        .sidebar { width: 300px; background: var(--bg-card); border-right: 1px solid var(--border); padding: 24px 0; box-shadow: 2px 0 4px rgba(0,0,0,0.05); overflow-y: auto; flex-shrink: 0; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; margin: 0 12px 4px 12px; cursor: pointer; color: var(--text-secondary); border-left: 3px solid transparent; transition: all 0.2s; font-size: 0.9rem; text-decoration: none; }
        .nav-item:hover { background: var(--bg-primary); color: var(--text-primary); border-left-color: var(--border); }
        .nav-item.active { background: var(--bg-primary); color: var(--trinity-blue); border-left-color: var(--trinity-red); font-weight: 600; }
        .nav-level { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; padding: 2px 6px; margin-left: auto; font-weight: bold; }
        .level-a1 { background: var(--level-a1); color: white; }
        .level-a2 { background: var(--level-a2); color: white; }
        .level-b1 { background: var(--level-b1); color: #000; }
        .level-b2 { background: var(--level-b2); color: white; }
        .level-c1 { background: var(--level-c1); color: white; }
        .level-c2 { background: var(--level-c2); color: white; }
        .content { flex: 1; background: var(--bg-primary); overflow: hidden; display: flex; flex-direction: column; }
        .iframe-container { flex: 1; width: 100%; height: 100%; background: white; }
        .content-iframe { width: 100%; height: 100%; border: none; background: white; }
        .section { display: none; flex: 1; flex-direction: column; height: 100%; overflow: auto; padding: 32px; }
        .section.active { display: flex; }
        .card { background: var(--bg-card); box-shadow: 0 2px 4px rgba(0,0,0,0.08); border: 1px solid var(--border); margin-bottom: 24px; }
        .card-header { padding: 20px 24px; border-bottom: 2px solid var(--border); font-weight: 600; color: var(--trinity-blue); text-transform: uppercase; letter-spacing: 0.5px; font-size: 0.95rem; }
        .card-body { padding: 24px; }
        .breadcrumbs { background: var(--bg-card); border-bottom: 1px solid var(--border); padding: 12px 24px; font-size: 0.85rem; color: var(--text-secondary); margin: -32px -32px 24px -32px; flex-shrink: 0; }
        .stat-card { background: var(--bg-card); border: 1px solid var(--border); padding: 24px; text-align: center; border-left: 4px solid var(--trinity-red); }
        .stat-label { color: var(--text-secondary); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }
        .stat-value { font-size: 2.5rem; font-weight: bold; color: var(--trinity-blue); font-family: 'Times New Roman', serif; }
        .section-title { font-size: 1.75rem; color: var(--trinity-blue); font-weight: normal; margin-bottom: 8px; border-bottom: 2px solid var(--trinity-red); padding-bottom: 12px; }
        .section-subtitle { color: var(--text-secondary); font-style: italic; margin-bottom: 24px; }
        .menu-category { font-size: 0.65rem; font-weight: 700; text-transform: uppercase; color: var(--text-secondary); margin: 16px 12px 8px 12px; padding-left: 12px; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 4px; }
        .status-badge { display: inline-block; padding: 4px 12px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .status-completed { background: var(--success); color: white; }
        .status-pending { background: var(--trinity-blue); color: white; }

        /* Pulsante Simulazioni Speciale */
        .sim-btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; 
            color: white !important; 
            border-radius: 8px !important;
            margin: 8px 12px !important;
        }
        .sim-btn:hover {
            opacity: 0.9;
            transform: translateX(4px);
        }

        @media (max-width: 1024px) { .sidebar { width: 260px; } }
        @media (max-width: 768px) { .sidebar { display: none; } }
    </style>
<base target="_blank">
</head>
<body>

<!-- LOGIN SECTION -->
<div id="loginSection" class="login-section active">
    <div class="login-container">
        <div class="login-header">
            <h1>Accademia delle Lingue</h1>
            <p>Nucleo educativo per la formazione europea al lavoro internazionale<br>sede di esame accreditata numero 68499</p>
        </div>
        <div class="login-body">
            <div id="alertBox" class="alert alert-error"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="email" class="form-input" placeholder="nome@email.it" required autocomplete="email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div style="position: relative;">
                        <input type="password" id="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="current-password" style="padding-right: 40px;">
                        <button type="button" onclick="togglePassword()" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.1rem;">üëÅÔ∏è</button>
                    </div>
                </div>
                <button type="submit" class="btn">Accedi</button>
            </form>
            <div class="signup-link" style="margin-top: 16px; text-align: center;">
                <p style="font-size: 0.85rem; color: var(--text-secondary);">Non hai un account?<br>
                <a href="richiesta-accesso.html" style="color: var(--trinity-blue); text-decoration: none; font-weight: 600; font-size: 0.9rem;">Richiedi accesso ‚Üí</a></p>
            </div>
        </div>
        <div class="login-footer">
            <p>¬© 2024 Nucleo Educativo - Sede di Esame Accreditata n. 68499</p>
        </div>
    </div>
</div>

<!-- STUDENT DASHBOARD -->
<div id="dashboard" class="dashboard">
    <nav class="top-nav">
        <div style="display:flex;align-items:center;gap:12px;">
            <span style="font-size:1.5rem;">üá¨üáß</span>
            <div>
                <div style="font-weight:600; letter-spacing: 0.5px;">TRINITY COLLEGE LONDON</div>
                <div style="font-size:0.7rem; opacity:0.8; font-style:italic;">GESE & ISE - English Language Certification - Nucleo Educativo per la Formazione Europea al Lavoro Internazionale - Sede di esame accreditata numero 68499 - </div>
            </div>
        </div>
        <div style="display:flex;align-items:center;gap:20px;">
            <div style="text-align:right;">
                <div id="userNameDisplay" style="font-weight:600; font-family: Georgia, serif;">Studente</div>
                <div id="userClassDisplay" style="font-size:0.8rem;opacity:0.8;">Livello CEFR</div>
            </div>
            <button onclick="logout()" style="background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.3);color:white;padding:8px 16px;cursor:pointer; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.5px;">Logout</button>
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar">
            <div class="menu-category">Generale</div>
            <div class="nav-item active" onclick="showSection('home')" id="nav-home">
                <span>üè†</span><span>Cruscotto</span>
            </div>
            <div class="nav-item" onclick="showSection('results')" id="nav-results">
                <span>üìä</span><span>Registro Valutazioni</span>
            </div>

            <div class="menu-category">GESE Grades 1-3 (A1 - A2.1)</div>
            <div class="nav-item" onclick="loadModule('trinity_gese1_intro.html', 'GESE Grade 1')" id="nav-gese1">
                <span>üéØ</span><span>GESE Grade 1</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese2_topics.html', 'GESE Grade 2')" id="nav-gese2">
                <span>üí¨</span><span>GESE Grade 2</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese3_language.html', 'GESE Grade 3')" id="nav-gese3">
                <span>üó£Ô∏è</span><span>GESE Grade 3</span><span class="nav-level level-a2">A2.1</span>
            </div>

            <div class="menu-category">GESE Grades 4-6 (A2.2 - B1.2)</div>
            <div class="nav-item" onclick="loadModule('trinity_gese4_language.html', 'GESE Grade 4')" onclick="loadModule('trinity_gese4_language.html', 'GESE Grade 4')" id="nav-gese4">
                <span>üó£Ô∏è</span><span>GESE Grade 4</span><span class="nav-level level-a2">A2.2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese5_language.html', 'GESE Grade 5')" onclick="loadModule('trinity_gese5_language.html', 'GESE Grade 5')" id="nav-gese5">
                <span>üó£Ô∏è</span><span>GESE Grade 5</span><span class="nav-level level-b1">B1.1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese6_reasoning.html', 'GESE Grade 6')" id="nav-gese6">
                <span>üó£Ô∏è</span><span>GESE Grade 6</span><span class="nav-level level-b1">B1.2</span>
            </div>

            <div class="menu-category">GESE Grades 7-9 (B2.1 - B2.3)</div>
            <div class="nav-item" onclick="loadModule('trinity_gese7_perspectives.html', 'GESE Grade 7')" id="nav-gese7">
                <span>üó£Ô∏è</span><span>GESE Grade 7</span><span class="nav-level level-b2">B2.1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese8_analysis.html', 'GESE Grade 8')" id="nav-gese8">
                <span>üó£Ô∏è</span><span>GESE Grade 8</span><span class="nav-level level-b2">B2.2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese9_synthesis.html', 'GESE Grade 9')" id="nav-gese9">
                <span>üó£Ô∏è</span><span>GESE Grade 9</span><span class="nav-level level-b2">B2.3</span>
            </div>

            <div class="menu-category">GESE Grades 10-12 (C1 - C2)</div>
            <div class="nav-item" onclick="loadModule('trinity_gese10_evaluation.html', 'GESE Grade 10')" id="nav-gese10">
                <span>üó£Ô∏è</span><span>GESE Grade 10</span><span class="nav-level level-c1">C1.1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese11_research.html', 'GESE Grade 11')" id="nav-gese11">
                <span>üó£Ô∏è</span><span>GESE Grade 11</span><span class="nav-level level-c1">C1.2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_gese12_mastery.html', 'GESE Grade 12')" id="nav-gese12">
                <span>üó£Ô∏è</span><span>GESE Grade 12</span><span class="nav-level level-c2">C2</span>
            </div>

            <div class="menu-category">ISE Foundation (A2 - B1)</div>
            <div class="nav-item" onclick="loadModule('trinity_ise0_interview.html', 'ISE Foundation Interview')" id="nav-ise0-int">
                <span>üé§</span><span>Interview</span><span class="nav-level level-a2">A2-B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise0_portfolio.html', 'ISE Foundation Portfolio')" id="nav-ise0-port">
                <span>üìÅ</span><span>Portfolio</span><span class="nav-level level-a2">A2-B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise0_task.html', 'ISE Foundation Task')" id="nav-ise0-task">
                <span>‚úèÔ∏è</span><span>Task</span><span class="nav-level level-a2">A2-B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise0_reading.html', 'ISE Foundation Reading')" id="nav-ise0-read">
                <span>üìñ</span><span>Reading</span><span class="nav-level level-a2">A2-B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise0_writing.html', 'ISE Foundation Writing')" id="nav-ise0-write">
                <span>‚úçÔ∏è</span><span>Writing</span><span class="nav-level level-a2">A2-B1</span>
            </div>

            <div class="menu-category">ISE I (B1)</div>
            <div class="nav-item" onclick="loadModule('trinity_ise1_interview.html', 'ISE I Interview')" id="nav-ise1-int">
                <span>üé§</span><span>Interview</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise1_portfolio.html', 'ISE I Portfolio')" id="nav-ise1-port">
                <span>üìÅ</span><span>Portfolio</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise1_task.html', 'ISE I Task')" id="nav-ise1-task">
                <span>‚úèÔ∏è</span><span>Task</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise1_reading.html', 'ISE I Reading')" id="nav-ise1-read">
                <span>üìñ</span><span>Reading</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise1_writing.html', 'ISE I Writing')" id="nav-ise1-write">
                <span>‚úçÔ∏è</span><span>Writing</span><span class="nav-level level-b1">B1</span>
            </div>

            <div class="menu-category">ISE II (B2)</div>
            <div class="nav-item" onclick="loadModule('trinity_ise2_interview.html', 'ISE II Interview')" id="nav-ise2-int">
                <span>üé§</span><span>Interview</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise2_portfolio.html', 'ISE II Portfolio')" id="nav-ise2-port">
                <span>üìÅ</span><span>Portfolio</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise2_task.html', 'ISE II Task')" id="nav-ise2-task">
                <span>‚úèÔ∏è</span><span>Task</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise2_reading.html', 'ISE II Reading')" id="nav-ise2-read">
                <span>üìñ</span><span>Reading</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise2_writing.html', 'ISE II Writing')" id="nav-ise2-write">
                <span>‚úçÔ∏è</span><span>Writing</span><span class="nav-level level-b2">B2</span>
            </div>

            <div class="menu-category">ISE III (C1)</div>
            <div class="nav-item" onclick="loadModule('trinity_ise3_interview.html', 'ISE III Interview')" id="nav-ise3-int">
                <span>üé§</span><span>Interview</span><span class="nav-level level-c1">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise3_portfolio.html', 'ISE III Portfolio')" id="nav-ise3-port">
                <span>üìÅ</span><span>Portfolio</span><span class="nav-level level-c1">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise3_task.html', 'ISE III Task')" id="nav-ise3-task">
                <span>‚úèÔ∏è</span><span>Task</span><span class="nav-level level-c1">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise3_reading.html', 'ISE III Reading')" id="nav-ise3-read">
                <span>üìñ</span><span>Reading</span><span class="nav-level level-c1">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise3_writing.html', 'ISE III Writing')" id="nav-ise3-write">
                <span>‚úçÔ∏è</span><span>Writing</span><span class="nav-level level-c1">C1</span>
            </div>

            <div class="menu-category">ISE IV (C2)</div>
            <div class="nav-item" onclick="loadModule('trinity_ise4_interview.html', 'ISE IV Interview')" id="nav-ise4-int">
                <span>üé§</span><span>Interview</span><span class="nav-level level-c2">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise4_portfolio.html', 'ISE IV Portfolio')" id="nav-ise4-port">
                <span>üìÅ</span><span>Portfolio</span><span class="nav-level level-c2">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise4_task.html', 'ISE IV Task')" onclick="loadModule('trinity_ise4_task.html', 'ISE IV Task')" id="nav-ise4-task">
                <span>‚úèÔ∏è</span><span>Task</span><span class="nav-level level-c2">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('trinity_ise4_reading_writing.html', 'ISE IV Reading & Writing')" id="nav-ise4-rw">
                <span>üìñ</span><span>Reading & Writing</span><span class="nav-level level-c2">C2</span>
            </div>

            <div class="nav-item sim-btn" onclick="loadModule('simulazioni.html', 'Simulazioni Esami')" id="nav-simulazioni">
                <span>üéØ</span><span><strong>SIMULAZIONI ESAMI</strong></span>
            </div>
        </aside>

        <main class="content">
            <!-- HOME / CRUSCOTTO CON DESCRIZIONI -->
            <div id="home" class="section active">
                <div class="breadcrumbs">
                    <strong>Cruscotto - Panoramica Livelli</strong>
                </div>
                <div style="margin-bottom:32px;">
                    <h1 class="section-title">Benvenuto, <span id="welcomeName">Studente</span></h1>
                    <p class="section-subtitle">Seleziona un modulo dalla sidebar per iniziare lo studio</p>
                </div>

                <!-- GESE Descrizioni -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--trinity-red); color: white;">üó£Ô∏è GESE - Graded Examinations in Spoken English</div>
                    <div class="card-body">
                        <p style="margin-bottom: 20px; color: var(--text-secondary);">Esami orali focalizzati sulla comunicazione parlata, dal livello principiante a quello madrelingua.</p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                            <div style="padding: 16px; background: #f0fdf4; border-left: 4px solid var(--level-a1); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-a1); margin-bottom: 8px;">üå± Grades 1-3 (A1 - A2.1)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);"><strong>Initial Stage:</strong> Presentazioni personali, descrizione di persone e luoghi, routine quotidiane. Focus su vocabolario base e strutture semplici.</p>
                            </div>
                            <div style="padding: 16px; background: #eff6ff; border-left: 4px solid var(--level-a2); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-a2); margin-bottom: 8px;">üåø Grades 4-6 (A2.2 - B1.2)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);"><strong>Elementary Stage:</strong> Narrazione al passato, espressione di opinioni, situazioni ipotetiche. Sviluppo della fluency e accuratezza.</p>
                            </div>
                            <div style="padding: 16px; background: #fef2f2; border-left: 4px solid var(--level-b2); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-b2); margin-bottom: 8px;">üå≥ Grades 7-9 (B2.1 - B2.3)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);"><strong>Intermediate Stage:</strong> Analisi critica, argomentazione complessa, temi astratti. Capacit√† di negoziare significato.</p>
                            </div>
                            <div style="padding: 16px; background: #faf5ff; border-left: 4px solid var(--level-c1); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-c1); margin-bottom: 8px;">üèÜ Grades 10-12 (C1 - C2)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);"><strong>Advanced Stage:</strong> Discorso accademico, ricerca indipendente, competenza pragmatica. Livello professionale/madrelingua.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ISE Descrizioni -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--trinity-blue); color: white;">üìö ISE - Integrated Skills in English</div>
                    <div class="card-body">
                        <p style="margin-bottom: 20px; color: var(--text-secondary);">Esami integrati che valutano lettura, scrittura, ascolto e produzione orale attraverso task autentici.</p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                            <div style="padding: 16px; background: #eff6ff; border-left: 4px solid #2563eb; border-radius: 0 8px 8px 0;">
                                <h4 style="color: #2563eb; margin-bottom: 8px;">üìò ISE Foundation (A2-B1)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Comprensione di testi semplici, scrittura di email e brevi testi, conversazioni quotidiane.</p>
                            </div>
                            <div style="padding: 16px; background: #fefce8; border-left: 4px solid #c9a227; border-radius: 0 8px 8px 0;">
                                <h4 style="color: #c9a227; margin-bottom: 8px;">üìó ISE I (B1)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Lettura di articoli, scrittura di saggi brevi, espressione di opinioni, task integrati.</p>
                            </div>
                            <div style="padding: 16px; background: #fef2f2; border-left: 4px solid var(--level-b2); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-b2); margin-bottom: 8px;">üìï ISE II (B2)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Testi complessi, scrittura argomentativa, analisi critica, presentazioni strutturate.</p>
                            </div>
                            <div style="padding: 16px; background: #faf5ff; border-left: 4px solid var(--level-c1); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-c1); margin-bottom: 8px;">üìô ISE III (C1)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Letteratura specialistica, scrittura accademica, inferenze complesse, fluency elevata.</p>
                            </div>
                            <div style="padding: 16px; background: #f1f5f9; border-left: 4px solid var(--level-c2); border-radius: 0 8px 8px 0;">
                                <h4 style="color: var(--level-c2); margin-bottom: 8px;">üìì ISE IV (C2)</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Livello madrelingua, manipolazione sofisticata del linguaggio, consapevolezza pragmatica.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- IFRAME SECTION -->
            <div id="module-frame" class="section">
                <div class="breadcrumbs" id="module-breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / 
                    <strong id="current-module-name">Modulo</strong>
                </div>
                <div class="iframe-container">
                    <iframe name="contentFrame" class="content-iframe" src="about:blank"></iframe>
                </div>
            </div>

            <!-- RESULTS -->
            <div id="results" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Registro Valutazioni</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Registro Valutazioni</h1>
                    <p class="section-subtitle">Riepilogo dei punteggi e del progresso formativo</p>
                </div>
                <div class="card">
                    <div class="card-body">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid var(--border);">
                                    <th style="text-align: left; padding: 12px;">Modulo</th>
                                    <th style="text-align: center; padding: 12px;">Livello</th>
                                    <th style="text-align: center; padding: 12px;">Data</th>
                                    <th style="text-align: center; padding: 12px;">Punteggio</th>
                                    <th style="text-align: center; padding: 12px;">Stato</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
// Database unificato
let db = { users: [], requests: [], scores: [] };
let currentUser = null;

// Inizializzazione
document.addEventListener('DOMContentLoaded', function() {
    initDB();

    // Check sessione
    const studentSession = sessionStorage.getItem('studentLoggedIn');
    if (studentSession === 'true') {
        const email = sessionStorage.getItem('studentEmail');
        currentUser = db.users.find(u => u.email === email);
        if (currentUser) {
            showDashboard();
        }
    }
});

function initDB() {
    const stored = localStorage.getItem('accademia_data');
    if (stored) {
        db = JSON.parse(stored);
        if (!db.users) db.users = [];
        if (!db.requests) db.requests = [];
        if (!db.scores) db.scores = [];
    }
}

function saveDB() {
    localStorage.setItem('accademia_data', JSON.stringify(db));
}

// Toggle password
function togglePassword() {
    const passwordInput = document.getElementById('password');
    const toggleBtn = event.currentTarget;

    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleBtn.textContent = 'üôà';
    } else {
        passwordInput.type = 'password';
        toggleBtn.textContent = 'üëÅÔ∏è';
    }
}

// Login
document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const email = document.getElementById('email').value.trim().toLowerCase();
    const password = document.getElementById('password').value;

    // Cerca utente nel database
    let user = db.users.find(u => u.email === email && u.password === password);

    if (!user) {
        showAlert('‚ùå Email o password errati');
        return;
    }

    // Login ok
    currentUser = user;
    sessionStorage.setItem('studentLoggedIn', 'true');
    sessionStorage.setItem('studentEmail', email);
    sessionStorage.setItem('studentName', user.name || 'Studente');
    sessionStorage.setItem('studentLevel', user.level || 'A1');

    showDashboard();
});

function showDashboard() {
    document.getElementById('loginSection').classList.remove('active');
    document.getElementById('dashboard').style.display = 'flex';

    const displayName = sessionStorage.getItem('studentName') || 'Studente';
    const level = sessionStorage.getItem('studentLevel') || 'A1';

    document.getElementById('welcomeName').textContent = displayName;
    document.getElementById('userNameDisplay').textContent = displayName;
    document.getElementById('userClassDisplay').textContent = 'Livello ' + level + ' CEFR';

    loadResults();
}

function logout() {
    sessionStorage.removeItem('studentLoggedIn');
    sessionStorage.removeItem('studentEmail');
    currentUser = null;
    window.location.reload();
}

function showAlert(message, type = 'error') {
    const alert = document.getElementById('alertBox');
    alert.textContent = message;
    alert.className = 'alert alert-' + type;
    alert.style.display = 'block';
    setTimeout(() => alert.style.display = 'none', 5000);
}

// Navigazione
function showSection(sectionId) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');

    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    const navItem = document.getElementById('nav-' + sectionId);
    if (navItem) navItem.classList.add('active');
}

function loadModule(url, name) {
    showSection('module-frame');
    document.getElementById('current-module-name').textContent = name;
    document.querySelector('iframe[name="contentFrame"]').src = url;
}

function loadResults() {
    const tbody = document.getElementById('resultsTableBody');
    if (!tbody) return;

    tbody.innerHTML = `
        <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 12px;">Nessun modulo completato</td>
            <td style="padding: 12px; text-align: center;">-</td>
            <td style="padding: 12px; text-align: center;">-</td>
            <td style="padding: 12px; text-align: center;">-</td>
            <td style="padding: 12px; text-align: center;"><span class="status-badge status-pending">In attesa</span></td>
        </tr>
    `;
}
</script>

</body>
</html>
