<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISE IV - Reading & Writing | Trinity College London C2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e3a5f;
            --primary-dark: #152a45;
            --accent: #c9a227;
            --bg-primary: #f5f5f0;
            --bg-card: #ffffff;
            --border: #d4d4c8;
            --text-primary: #2c3e50;
            --text-secondary: #5a6c7d;
            --success: #276749;
            --error: #c53030;
            --level-c2: #0f172a;
            --highlight: #fef3c7;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, var(--level-c2) 0%, #1e293b 100%);
            color: white;
            padding: 40px;
            border-radius: 0;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: normal;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-style: italic;
        }

        .badge {
            display: inline-block;
            background: var(--accent);
            color: #000;
            padding: 5px 15px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 15px;
            margin-right: 10px;
        }

        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .section h2 {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .section h3 {
            color: var(--primary);
            font-size: 1.2rem;
            margin: 25px 0 15px 0;
        }

        .info-box {
            background: #fef3c7;
            border-left: 4px solid var(--accent);
            padding: 20px;
            margin: 20px 0;
            font-size: 0.95rem;
        }

        .warning-box {
            background: #fee2e2;
            border-left: 4px solid var(--error);
            padding: 20px;
            margin: 20px 0;
        }

        .task-container {
            background: #f8fafc;
            border: 3px solid var(--primary);
            padding: 30px;
            margin: 25px 0;
        }

        .task-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            margin: -30px -30px 25px -30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .task-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .meta-item {
            background: rgba(255,255,255,0.2);
            padding: 5px 12px;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .source-text {
            background: white;
            border: 2px solid var(--border);
            padding: 25px;
            margin: 20px 0;
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .source-text h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .highlight {
            background: var(--highlight);
            padding: 2px 5px;
        }

        .prompt-box {
            background: #f0f9ff;
            border: 2px solid #0369a1;
            padding: 20px;
            margin: 20px 0;
        }

        .prompt-box strong {
            color: #0369a1;
        }

        .writing-area {
            width: 100%;
            min-height: 350px;
            padding: 20px;
            border: 2px solid var(--border);
            font-family: 'Georgia', serif;
            font-size: 1rem;
            line-height: 1.8;
            resize: vertical;
            margin: 15px 0;
        }

        .writing-area:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: var(--success);
        }

        .timer-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--border);
            z-index: 1000;
        }

        .timer-fill {
            height: 100%;
            background: var(--accent);
            width: 100%;
            transition: width 1s linear;
        }

        .timer-display {
            position: fixed;
            top: 15px;
            right: 20px;
            background: var(--level-c2);
            color: white;
            padding: 12px 25px;
            font-size: 1.3rem;
            font-family: 'Courier New', monospace;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .rubric-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        .rubric-table th {
            background: var(--primary);
            color: white;
            padding: 12px;
            text-align: left;
        }

        .rubric-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .rubric-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .exercise-card {
            background: white;
            border: 2px solid var(--border);
            padding: 20px;
            transition: all 0.3s;
        }

        .exercise-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .exercise-card h4 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
        }

        .mcq-option {
            display: block;
            padding: 12px 15px;
            margin: 8px 0;
            background: #f8fafc;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .mcq-option:hover {
            background: #f0f9ff;
            border-color: #0369a1;
        }

        .mcq-option.selected {
            background: #0369a1;
            color: white;
            border-color: #0369a1;
        }

        .mcq-option.correct {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .mcq-option.incorrect {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        .feedback-panel {
            display: none;
            background: #f0fdf4;
            border: 2px solid var(--success);
            padding: 25px;
            margin-top: 20px;
        }

        .feedback-panel.show {
            display: block;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--success);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px auto;
        }

        .tips-box {
            background: #f0f9ff;
            border-left: 4px solid #0369a1;
            padding: 20px;
            margin: 15px 0;
        }

        .tips-box h4 {
            color: #0369a1;
            margin-bottom: 10px;
        }

        .transformation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .transformation-table td, .transformation-table th {
            padding: 12px;
            border: 1px solid var(--border);
        }

        .transformation-table th {
            background: var(--primary);
            color: white;
        }

        .gap-fill {
            display: inline-block;
            min-width: 120px;
            border-bottom: 2px solid var(--primary);
            text-align: center;
            margin: 0 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 25px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .timer-display {
                font-size: 1rem;
                padding: 8px 15px;
            }
            
            .task-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
<base target="_blank">
</head>
<body>

    <!-- Timer -->
    <div class="timer-bar">
        <div class="timer-fill" id="timerFill"></div>
    </div>
    <div class="timer-display" id="timerDisplay">3:00:00</div>

    <div class="container">
        
        <!-- Header -->
        <div class="header">
            <h1>ISE IV - Reading & Writing</h1>
            <p>Controlled Written Examination | Trinity College London</p>
            <div class="badge">C2 - Mastery Level</div>
            <div class="badge">3 Hours</div>
            <div class="badge">3 Tasks</div>
        </div>

        <!-- Exam Overview -->
        <div class="section">
            <h2>üìã Struttura dell'Esame</h2>
            
            <div class="warning-box">
                <strong>‚ö†Ô∏è Importante:</strong> A differenza del Portfolio (learner-led), il <strong>Controlled Written Exam</strong> 
                si svolge in condizioni d'esame controllate. Hai <strong>3 ore</strong> per completare 3 task obbligatori. 
                Non √® possibile usare dizionari o materiali di consultazione.
            </div>

            <div class="info-box">
                <strong>Struttura ISE IV Reading & Writing:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><strong>Task 1:</strong> Reading into writing - Text Synthesis (350 words) | Report/Essay</li>
                    <li><strong>Task 2:</strong> Reading into writing - Text Transformation (300 words) | Different format/genre</li>
                    <li><strong>Task 3:</strong> Critical/Analytical Writing (250 words) | Evidence-based argument</li>
                </ul>
            </div>

            <table class="rubric-table">
                <thead>
                    <tr>
                        <th>Task</th>
                        <th>Tipo</th>
                        <th>Word Count</th>
                        <th>Focus</th>
                        <th>Peso Valutazione</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Task 1</strong></td>
                        <td>Text Synthesis</td>
                        <td>350 words</td>
                        <td>Integrare informazioni da 2-3 fonti</td>
                        <td>35%</td>
                    </tr>
                    <tr>
                        <td><strong>Task 2</strong></td>
                        <td>Text Transformation</td>
                        <td>300 words</td>
                        <td>Cambiare genere/registro/audience</td>
                        <td>35%</td>
                    </tr>
                    <tr>
                        <td><strong>Task 3</strong></td>
                        <td>Critical Writing</td>
                        <td>250 words</td>
                        <td>Argomentazione evidence-based</td>
                        <td>30%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- PRE-READING EXERCISES -->
        <div class="section">
            <h2>üéØ Esercizi Preliminari: Reading Skills</h2>
            
            <div class="exercise-grid">
                <!-- Exercise 1: Skimming -->
                <div class="exercise-card">
                    <h4>üìñ Esercizio 1: Skimming & Gist</h4>
                    <p><strong>Istruzioni:</strong> Leggi il testo seguente (30 secondi) e seleziona il main idea.</p>
                    
                    <div class="source-text" style="font-size: 0.9rem;">
                        <p>"The proliferation of artificial intelligence in educational contexts has precipitated a paradigmatic shift in pedagogical methodologies. While proponents argue that AI-driven personalized learning trajectories optimize cognitive acquisition, critics contend that such algorithmic determinism fundamentally undermines the socio-constructivist dimensions of knowledge formation. Empirical evidence remains inconclusive, with longitudinal studies yielding contradictory outcomes regarding academic attainment and learner autonomy."</p>
                    </div>

                    <p style="margin-top: 15px;"><strong>Qual √® il main idea?</strong></p>
                    <span class="mcq-option" onclick="checkAnswer(this, false)">
                        A) L'AI nell'educazione √® universalmente benefica
                    </span>
                    <span class="mcq-option" onclick="checkAnswer(this, true)">
                        B) L'impatto dell'AI nell'educazione √® controverso e non risolto
                    </span>
                    <span class="mcq-option" onclick="checkAnswer(this, false)">
                        C) Gli studi dimostrano chiaramente i rischi dell'AI
                    </span>
                    <span class="mcq-option" onclick="checkAnswer(this, false)">
                        D) L'AI sostituisce completamente i metodi tradizionali
                    </span>
                    
                    <div class="feedback-text" style="margin-top: 15px; display: none;"></div>
                </div>

                <!-- Exercise 2: Inference -->
                <div class="exercise-card">
                    <h4>üß© Esercizio 2: Inference & Deduction</h4>
                    <p><strong>Istruzioni:</strong> Che cosa puoi dedurre dall'uso di "algorithmic determinism"?</p>
                    
                    <div class="source-text" style="font-size: 0.9rem;">
                        <p>"Critics contend that such <span class="highlight">algorithmic determinism</span> fundamentally undermines the socio-constructivist dimensions of knowledge formation."</p>
                    </div>

                    <p style="margin-top: 15px;"><strong>Cosa implica "algorithmic determinism"?</strong></p>
                    <span class="mcq-option" onclick="checkInference(this, 'B')">
                        A) Gli algoritmi sono neutrali e oggettivi
                    </span>
                    <span class="mcq-option" onclick="checkInference(this, 'B')">
                        B) Gli algoritmi pre-determinano i risultati in modo rigido
                    </span>
                    <span class="mcq-option" onclick="checkInference(this, 'B')">
                        C) Gli algoritmi sono creati da educatori
                    </span>
                    <span class="mcq-option" onclick="checkInference(this, 'B')">
                        D) Gli algoritmi favoriscono la creativit√†
                    </span>
                </div>

                <!-- Exercise 3: Transformation -->
                <div class="exercise-card">
                    <h4>üîÑ Esercizio 3: Language Transformation</h4>
                    <p><strong>Istruzioni:</strong> Trasforma le seguenti espressioni in forma pi√π formale/academica:</p>
                    
                    <table class="transformation-table">
                        <tr>
                            <th>Informale</th>
                            <th>Formale C2</th>
                        </tr>
                        <tr>
                            <td>"AI is getting better and better"</td>
                            <td>
                                <input type="text" class="gap-fill" placeholder="Scrivi qui..." 
                                onblur="checkTransformation(this, 'AI capabilities continue to evolve exponentially')">
                            </td>
                        </tr>
                        <tr>
                            <td>"Kids learn differently now"</td>
                            <td>
                                <input type="text" class="gap-fill" placeholder="Scrivi qui..."
                                onblur="checkTransformation(this, 'Contemporary learners exhibit fundamentally altered cognitive patterns')">
                            </td>
                        </tr>
                        <tr>
                            <td>"Teachers don't like this"</td>
                            <td>
                                <input type="text" class="gap-fill" placeholder="Scrivi qui..."
                                onblur="checkTransformation(this, 'Educators express reservations regarding such developments')">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- TASK 1: TEXT SYNTHESIS -->
        <div class="section">
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Task 1: Reading into Writing - Text Synthesis</span>
                    <div class="task-meta">
                        <span class="meta-item">350 words</span>
                        <span class="meta-item">Report</span>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Obiettivo:</strong> Leggi i due testi seguenti e scrivi un report di 350 parole 
                    che sintetizzi le informazioni chiave, evidenziando aree di accordo e disaccordo.
                </div>

                <div class="source-text">
                    <h4>üìÑ Source Text A: The Economist - "The AI Education Revolution"</h4>
                    <p>"Artificial intelligence is poised to transform education at every level. Adaptive learning platforms can personalize instruction to individual student needs, identifying knowledge gaps in real-time and adjusting content accordingly. Preliminary data from pilot programs in Singapore and Finland suggest attainment improvements of 15-20% in mathematics and science. Furthermore, AI can automate administrative burdens, allowing educators to focus on mentorship and complex pedagogical challenges. The technology is not merely supplementary but potentially transformative, democratizing access to high-quality instruction regardless of geographical or socioeconomic constraints."</p>
                    <p style="text-align: right; font-size: 0.85rem; color: var(--text-secondary);">(Word count: 98)</p>
                </div>

                <div class="source-text">
                    <h4>üìÑ Source Text B: Journal of Educational Philosophy - "The Cost of Algorithmic Education"</h4>
                    <p>"The uncritical adoption of AI in educational contexts raises profound epistemological concerns. When learning pathways are determined by algorithmic prediction, we risk conflating measurable outcomes with genuine understanding. The 'personalization' promised by adaptive systems often manifests as narrow skill optimization, neglecting the broader cognitive and ethical development that constitutes true education. Moreover, the data collection inherent to AI platforms presents unprecedented privacy risks, with student profiling extending into predictive behavioral analytics. We must ask: are we educating citizens or training data points?"</p>
                    <p style="text-align: right; font-size: 0.85rem; color: var(--text-secondary);">(Word count: 95)</p>
                </div>

                <div class="prompt-box">
                    <strong>Writing Task:</strong><br>
                    Write a report (approximately 350 words) for an educational policy committee in which you:
                    <ol style="margin-top: 10px; margin-left: 20px;">
                        <li>Synthesize the key arguments presented in both sources</li>
                        <li>Identify and analyze areas of convergence and divergence</li>
                        <li>Evaluate the implications for educational policy-making</li>
                    </ol>
                </div>

                <div class="tips-box">
                    <h4>üí° Strategie C2 per Text Synthesis:</h4>
                    <ul>
                        <li><strong>Reporting verbs variati:</strong> "Source A contends... whereas Source B cautions..."</li>
                        <li><strong>Connettivi di contrasto:</strong> "Conversely", "By contrast", "While the former...", "The latter..."</li>
                        <li><strong>Attribution chiara:</strong> Non confondere le fonti; usa "According to...", "As argued by..."</li>
                        <li><strong>Struttura consigliata:</strong> Intro ‚Üí Summary Source A ‚Üí Summary Source B ‚Üí Comparative Analysis ‚Üí Implications</li>
                    </ul>
                </div>

                <textarea class="writing-area" id="task1Text" placeholder="Scrivi qui il tuo report (350 parole)...

Suggerimenti struttura:
- Introduction: Context + scope of report
- Source A synthesis: Key claims on AI benefits (15-20% improvement, personalization, democratization)
- Source B synthesis: Critical stance (epistemological concerns, narrow optimization, privacy risks)
- Comparative analysis: Agreement on significance, divergence on evaluation
- Implications: Balanced recommendations for policy

Linguaggio C2: synthesis, convergence, divergence, implications, contend, caution, underscore"></textarea>

                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                    <div>
                        <span id="wordCount1">0</span> / 350 parole
                        <span id="warning1" style="color: var(--error); display: none;"> ‚ö†Ô∏è</span>
                    </div>
                    <div>
                        <button class="btn btn-secondary" onclick="checkSourcesUsed(1)">üîç Verifica Citazioni</button>
                        <button class="btn" onclick="submitTask(1)">‚úì Invia Task 1</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TASK 2: TEXT TRANSFORMATION -->
        <div class="section">
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Task 2: Reading into Writing - Text Transformation</span>
                    <div class="task-meta">
                        <span class="meta-item">300 words</span>
                        <span class="meta-item">Article ‚Üí Policy Brief</span>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Obiettivo:</strong> Trasforma il genere, il registro e l'audience mantenendo il contenuto informativo 
                    ma adattando stile, struttura e tono.
                </div>

                <div class="source-text">
                    <h4>üìÑ Source Text: Academic Article Extract</h4>
                    <p>"The empirical investigation into neuroplasticity and adult language acquisition reveals that conventional pedagogical methodologies may significantly underestimate the cognitive capabilities of mature learners. Longitudinal neuroimaging studies demonstrate that adult brains retain substantial adaptive capacity, challenging the critical period hypothesis that has dominated second language acquisition theory for decades. These findings suggest that affective variables‚Äîparticularly motivation, anxiety, and self-efficacy‚Äîmay exert greater influence on ultimate attainment than biological maturation. Educational institutions should therefore reconsider age-stratified language programs in favor of more inclusive, psychologically-informed approaches that recognize the sophisticated metalinguistic awareness that adult learners bring to the acquisition process."</p>
                    <p style="text-align: right; font-size: 0.85rem; color: var(--text-secondary);">(Word count: 108)</p>
                </div>

                <div class="prompt-box">
                    <strong>Transformation Task:</strong><br>
                    Transform the above academic article extract into a <strong>policy brief</strong> (approximately 300 words) 
                    for <strong>Ministry of Education officials</strong> who are <strong>not specialists</strong> in linguistics or neuroscience.
                    <br><br>
                    Your policy brief should:
                    <ol style="margin-top: 10px; margin-left: 20px;">
                        <li>Maintain all key informational content</li>
                        <li>Use accessible language while remaining authoritative</li>
                        <li>Include actionable recommendations</li>
                        <li>Follow policy brief conventions (executive summary format)</li>
                    </ol>
                </div>

                <div class="tips-box">
                    <h4>üîÑ Strategie di Transformation C2:</h4>
                    <ul>
                        <li><strong>Genere:</strong> Academic article ‚Üí Policy brief (pi√π diretto, orientato all'azione)</li>
                        <li><strong>Registro:</strong> Mantieni formale ma elimina jargon specialistico</li>
                        <li><strong>Audience:</strong> Non-specialisti ‚Üí spiega concetti chiave (neuroplasticity, critical period)</li>
                        <li><strong>Struttura:</strong> Executive summary ‚Üí Key findings ‚Üí Recommendations</li>
                        <li><strong>Linguaggio:</strong> "empirical investigation" ‚Üí "research shows"; "affective variables" ‚Üí "emotional factors"</li>
                    </ul>
                </div>

                <textarea class="writing-area" id="task2Text" placeholder="Scrivi qui il tuo policy brief (300 parole)...

Struttura consigliata:
EXECUTIVE SUMMARY (50 words): Core message for busy officials

KEY FINDINGS (150 words):
- Adult brain retains learning capacity (explain neuroplasticity simply)
- Motivation matters more than age
- Adults have metalinguistic advantages

RECOMMENDATIONS (100 words):
- Reconsider age-based programs
- Invest in teacher training on adult psychology
- Pilot inclusive language programs

Linguaggio: accessible authority, actionable verbs ('recommend', 'urge', 'propose')"></textarea>

                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                    <div>
                        <span id="wordCount2">0</span> / 300 parole
                        <span id="warning2" style="color: var(--error); display: none;"> ‚ö†Ô∏è</span>
                    </div>
                    <div>
                        <button class="btn btn-secondary" onclick="compareTransformation()">üîç Confronta con Originale</button>
                        <button class="btn" onclick="submitTask(2)">‚úì Invia Task 2</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TASK 3: CRITICAL WRITING -->
        <div class="section">
            <div class="task-container">
                <div class="task-header">
                    <span class="task-title">Task 3: Critical/Analytical Writing</span>
                    <div class="task-meta">
                        <span class="meta-item">250 words</span>
                        <span class="meta-item">Evidence-Based Argument</span>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Obiettivo:</strong> Sviluppa un argomento originale basato su evidenza, dimostrando capacit√† 
                    di pensiero critico indipendente a livello C2.
                </div>

                <div class="prompt-box">
                    <strong>Writing Prompt:</strong><br>
                    "The primary purpose of higher education should be to prepare students for employment. 
                    All other objectives‚Äîcritical thinking, civic engagement, personal development‚Äîare secondary luxuries 
                    that institutions can no longer afford in an era of economic constraint."
                    <br><br>
                    Write a critical response (approximately 250 words) in which you:
                    <ol style="margin-top: 10px; margin-left: 20px;">
                        <li>Evaluate the validity of this proposition</li>
                        <li>Develop a nuanced position that transcends simple agreement or disagreement</li>
                        <li>Support your argument with reasoned evidence</li>
                    </ol>
                </div>

                <div class="tips-box">
                    <h4>üß† Approccio Critico C2:</h4>
                    <ul>
                        <li><strong>Evita il binario:</strong> Non semplicemente "d'accordo" o "in disaccordo"</li>
                        <li><strong>Nuance:</strong> "While the proposition contains merit regarding..., it fundamentally overlooks..."</li>
                        <li><strong>Sintesi superiore:</strong> Crea una terza posizione che incorpori elementi validi di entrambi i lati</li>
                        <li><strong>Evidence:</strong> Usa esempi ipotetici ma plausibili: "Consider, for instance, the case of..."</li>
                        <li><strong>Conclusione:</strong> Provocative closing che inviti a riflettere</li>
                    </ul>
                </div>

                <div class="source-text" style="background: #f0f9ff;">
                    <h4>üí° Esempio di struttura argomentativa C2:</h4>
                    <p><strong>Introduction:</strong> Acknowledge the economic reality + thesis statement showing nuanced stance<br>
                    <strong>Evaluation:</strong> "The proposition correctly identifies... However, it conflates..."<br>
                    <strong>Development:</strong> "A more sophisticated understanding recognizes that employability and critical thinking are not mutually exclusive but mutually constitutive..."<br>
                    <strong>Evidence:</strong> "Research in professional fields increasingly demonstrates that..."<br>
                    <strong>Conclusion:</strong> "Ultimately, the question is not whether universities can afford liberal education, but whether society can afford its absence."</p>
                </div>

                <textarea class="writing-area" id="task3Text" placeholder="Scrivi qui la tua risposta critica (250 parole)...

Approccio consigliato:
- Non rifiutare completamente la proposta (ha un punto sui vincoli economici)
- Ma evidenziare la falsa dicotomia: employability vs. critical thinking
- Argomentare che sono MUTUAMENTE CONSTITUTIVE, non opposte
- Esempio: i professionisti di successo del 21¬∞ secolo richiedono entrambe

Linguaggio C2: 
- mutually constitutive, not mutually exclusive
- the proposition conflates X with Y
- a more nuanced interpretation
- ultimately, the question is not... but...
- false dichotomy, artificial binary"></textarea>

                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                    <div>
                        <span id="wordCount3">0</span> / 250 parole
                        <span id="warning3" style="color: var(--error); display: none;"> ‚ö†Ô∏è</span>
                    </div>
                    <div>
                        <button class="btn btn-secondary" onclick="checkArgumentStructure()">üîç Verifica Struttura</button>
                        <button class="btn btn-success" onclick="submitTask(3)">‚úì Invia Task Finale</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ASSESSMENT & FEEDBACK -->
        <div class="section">
            <h2>üìä Criteri di Valutazione ISE IV Reading & Writing</h2>
            
            <table class="rubric-table">
                <thead>
                    <tr>
                        <th>Criterio</th>
                        <th>Distinction (Pass with Distinction)</th>
                        <th>Pass</th>
                        <th>Fail</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Reading into Writing</strong></td>
                        <td>Exceptional integration of sources; sophisticated synthesis; no misinterpretation</td>
                        <td>Accurate comprehension; good integration; minor misinterpretations</td>
                        <td>Misunderstanding of sources; poor integration; significant omission</td>
                    </tr>
                    <tr>
                        <td><strong>Task Fulfilment</strong></td>
                        <td>All elements addressed with sophistication; complete genre transformation</td>
                        <td>All elements addressed; adequate transformation</td>
                        <td>Missing elements; inappropriate genre/register</td>
                    </tr>
                    <tr>
                        <td><strong>Organizzazione</strong></td>
                        <td>Exceptional coherence; seamless source integration; sophisticated cohesion</td>
                        <td>Clear organization; appropriate cohesion</td>
                        <td>Unclear structure; poor paragraphing</td>
                    </tr>
                    <tr>
                        <td><strong>Linguaggio</strong></td>
                        <td>Wide range; precise vocabulary; natural C2 fluency; excellent genre awareness</td>
                        <td>Good range; mostly accurate; appropriate C2 attempts</td>
                        <td>Limited range; frequent errors; below C2 standard</td>
                    </tr>
                </tbody>
            </table>

            <div class="feedback-panel" id="finalFeedback">
                <h2 style="text-align: center; color: var(--success);">üéâ Controlled Exam Completato!</h2>
                <div class="score-circle" id="finalScore">--%</div>
                <p style="text-align: center; font-size: 1.1rem; margin-bottom: 20px;">
                    Punteggio stimato basato su word count, integrazione fonti e qualit√† linguistica C2
                </p>
                
                <div id="taskBreakdown"></div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="resetExam()">üîÑ Riprova Esame</button>
                    <button class="btn btn-success" onclick="saveResults()">üì§ Salva Risultati</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Timer functionality
        let totalTime = 3 * 60 * 60; // 3 hours in seconds
        let timeRemaining = totalTime;
        let timerInterval;

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                // Update progress bar
                const percent = (timeRemaining / totalTime) * 100;
                document.getElementById('timerFill').style.width = percent + '%';
                
                // Warning colors
                if (timeRemaining < 1800) { // Less than 30 min
                    document.getElementById('timerFill').style.background = '#dc2626';
                } else if (timeRemaining < 3600) { // Less than 1 hour
                    document.getElementById('timerFill').style.background = '#c9a227';
                }
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    alert('‚è∞ Tempo scaduto! I task completati verranno inviati automaticamente.');
                    autoSubmit();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeRemaining / 3600);
            const minutes = Math.floor((timeRemaining % 3600) / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timerDisplay').textContent = 
                `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Start timer on page load
        window.onload = function() {
            startTimer();
            setupWordCounters();
            loadDrafts();
        };

        // Word counters
        function setupWordCounters() {
            const tasks = [
                { id: 'task1Text', count: 'wordCount1', warning: 'warning1', min: 320, max: 380 },
                { id: 'task2Text', count: 'wordCount2', warning: 'warning2', min: 270, max: 330 },
                { id: 'task3Text', count: 'wordCount3', warning: 'warning3', min: 220, max: 280 }
            ];

            tasks.forEach(task => {
                const textarea = document.getElementById(task.id);
                const counter = document.getElementById(task.count);
                const warning = document.getElementById(task.warning);

                textarea.addEventListener('input', function() {
                    const words = this.value.trim().split(/\s+/).filter(w => w.length > 0).length;
                    counter.textContent = words;
                    
                    if (words < task.min || words > task.max) {
                        warning.style.display = 'inline';
                        counter.style.color = '#c53030';
                    } else {
                        warning.style.display = 'none';
                        counter.style.color = '#276749';
                    }
                    
                    // Auto-save
                    localStorage.setItem('ise4_rw_' + task.id, this.value);
                });
            });
        }

        function loadDrafts() {
            ['task1Text', 'task2Text', 'task3Text'].forEach(id => {
                const saved = localStorage.getItem('ise4_rw_' + id);
                if (saved) {
                    document.getElementById(id).value = saved;
                    document.getElementById(id).dispatchEvent(new Event('input'));
                }
            });
        }

        // Exercise checking functions
        function checkAnswer(element, isCorrect) {
            const options = element.parentElement.querySelectorAll('.mcq-option');
            options.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            
            element.classList.add('selected');
            
            if (isCorrect) {
                element.classList.add('correct');
                showFeedback(element, '‚úì Corretto! Hai identificato correttamente il main idea: l\'impatto dell\'AI √® controverso e non risolto.', 'success');
            } else {
                element.classList.add('incorrect');
                showFeedback(element, '‚úó Rivedi il testo. L\'autore non prende posizione chiara ma presenta prospettive contrastanti.', 'error');
            }
        }

        function checkInference(element, correctLetter) {
            const options = element.parentElement.querySelectorAll('.mcq-option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.onclick = null; // Disable further clicks
            });
            
            element.classList.add('selected');
            
            if (element.textContent.trim().startsWith(correctLetter)) {
                element.classList.add('correct');
                alert('‚úì Corretto! "Algorithmic determinism" implica che gli algoritmi pre-determinano i risultati in modo rigido e meccanico, limitando la libert√†.');
            } else {
                element.classList.add('incorrect');
                alert('‚úó "Determinism" suggerisce rigidit√† e mancanza di scelta, non neutralit√† o creativit√†.');
            }
        }

        function checkTransformation(input, expectedPattern) {
            const value = input.value.trim().toLowerCase();
            const patterns = expectedPattern.toLowerCase().split('|');
            
            let matched = false;
            patterns.forEach(pattern => {
                const keyWords = pattern.split(' ').filter(w => w.length > 3);
                const matches = keyWords.filter(word => value.includes(word)).length;
                if (matches >= 2) matched = true;
            });
            
            if (matched || value.length > 30) {
                input.style.background = '#f0fdf4';
                input.style.borderColor = '#276749';
            } else {
                input.style.background = '#fef2f2';
                input.style.borderColor = '#dc2626';
            }
        }

        function showFeedback(element, message, type) {
            const card = element.closest('.exercise-card');
            let feedbackDiv = card.querySelector('.feedback-text');
            if (!feedbackDiv) {
                feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'feedback-text';
                card.appendChild(feedbackDiv);
            }
            feedbackDiv.textContent = message;
            feedbackDiv.style.display = 'block';
            feedbackDiv.style.color = type === 'success' ? '#276749' : '#c53030';
            feedbackDiv.style.padding = '10px';
            feedbackDiv.style.background = type === 'success' ? '#f0fdf4' : '#fef2f2';
            feedbackDiv.style.borderRadius = '5px';
        }

        // Task submission
        let completedTasks = 0;
        let taskScores = {};

        function submitTask(taskNum) {
            const textareas = ['', 'task1Text', 'task2Text', 'task3Text'];
            const limits = ['', {min: 320, max: 380}, {min: 270, max: 330}, {min: 220, max: 280}];
            
            const textarea = document.getElementById(textareas[taskNum]);
            const words = textarea.value.trim().split(/\s+/).filter(w => w.length > 0).length;
            
            if (words < limits[taskNum].min || words > limits[taskNum].max) {
                if (!confirm('‚ö†Ô∏è Word count fuori range (' + words + ' parole). Consigliato: ' + limits[taskNum].min + '-' + limits[taskNum].max + 
                    '\n\nVuoi procedere comunque? (Potrebbe penalizzare il punteggio)')) {
                    return;
                }
            }

            // Calculate score
            const score = calculateTaskScore(textarea.value, taskNum);
            taskScores[taskNum] = score;
            completedTasks++;
            
            // Visual feedback
            textarea.style.background = '#f0fdf4';
            textarea.style.borderColor = '#276749';
            textarea.readOnly = true;
            
            alert('‚úì Task ' + taskNum + ' inviato!\n\nPunteggio stimato: ' + score + '%\n\n' + getTaskFeedback(taskNum, score));
            
            if (completedTasks === 3) {
                showFinalResults();
            }
        }

        function calculateTaskScore(text, taskNum) {
            let score = 65; // Base passing score
            
            // C2 markers
            const markers = {
                1: ['synthesize', 'convergence', 'divergence', 'source A', 'source B', 'according to', 'contends', 'cautions', 'implies', 'furthermore', 'conversely'],
                2: ['executive summary', 'key findings', 'recommendations', 'policy', 'evidence suggests', 'therefore', 'propose', 'urge'],
                3: ['nuanced', 'conflates', 'mutually constitutive', 'false dichotomy', 'however', 'ultimately', 'proposition', 'validity']
            };
            
            const textLower = text.toLowerCase();
            let found = 0;
            markers[taskNum].forEach(marker => {
                if (textLower.includes(marker)) found++;
            });
            
            score += found * 3;
            
            // Check complexity
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
            const avgLength = text.split(/\s+/).length / (sentences.length || 1);
            if (avgLength > 22) score += 5;
            
            // Check paragraph structure
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 50);
            if (paragraphs.length >= 3) score += 5;
            
            // Task-specific bonuses
            if (taskNum === 1 && textLower.includes('source a') && textLower.includes('source b')) score += 5;
            if (taskNum === 2 && textLower.includes('executive summary')) score += 5;
            if (taskNum === 3 && (textLower.includes('not mutually exclusive') || textLower.includes('false dichotomy'))) score += 5;
            
            return Math.min(Math.max(score, 55), 95);
        }

        function getTaskFeedback(taskNum, score) {
            const feedbacks = {
                1: { high: "Ottima integrazione delle fonti", medium: "Buona sintesi", low: "Verifica citazione di entrambe le fonti" },
                2: { high: "Eccellente transformation di genere", medium: "Buon adattamento all'audience", low: "Sviluppa maggiore adattamento" },
                3: { high: "Argomentazione critica sofisticata", medium: "Buona analisi", low: "Evita posizioni binarie" }
            };
            
            if (score >= 80) return feedbacks[taskNum].high;
            if (score >= 65) return feedbacks[taskNum].medium;
            return feedbacks[taskNum].low;
        }

        function showFinalResults() {
            const avg = Math.round((taskScores[1] + taskScores[2] + taskScores[3]) / 3);
            document.getElementById('finalScore').textContent = avg + '%';
            
            let breakdown = '<h3>Breakdown Task:</h3><ul style="list-style: none; padding: 0;">';
            breakdown += '<li style="padding: 10px; border-bottom: 1px solid #d4d4c8;"><strong>Task 1 (Synthesis):</strong> ' + taskScores[1] + '%</li>';
            breakdown += '<li style="padding: 10px; border-bottom: 1px solid #d4d4c8;"><strong>Task 2 (Transformation):</strong> ' + taskScores[2] + '%</li>';
            breakdown += '<li style="padding: 10px;"><strong>Task 3 (Critical):</strong> ' + taskScores[3] + '%</li>';
            breakdown += '</ul>';
            
            if (avg >= 80) {
                breakdown += '<div class="info-box" style="margin-top: 20px; background: #dcfce7;">üéâ <strong>Distinction level!</strong> Ottima padronanza delle skills ISE IV.</div>';
            } else if (avg >= 65) {
                breakdown += '<div class="info-box" style="margin-top: 20px;">üëç <strong>Pass.</strong> Competenze adeguate ma con margine di miglioramento.</div>';
            } else {
                breakdown += '<div class="warning-box" style="margin-top: 20px;">‚ö†Ô∏è <strong>Necessita ulteriore pratica.</strong> Rivisedi i criteri C2.</div>';
            }
            
            document.getElementById('taskBreakdown').innerHTML = breakdown;
            document.getElementById('finalFeedback').classList.add('show');
            document.getElementById('finalFeedback').scrollIntoView({ behavior: 'smooth' });
            
            clearInterval(timerInterval);
        }

        function autoSubmit() {
            [1, 2, 3].forEach(num => {
                const textarea = document.getElementById('task' + num + 'Text');
                if (!textarea.readOnly && textarea.value.trim().length > 50) {
                    submitTask(num);
                }
            });
        }

        function resetExam() {
            if (!confirm('Sei sicuro? Tutti i testi saranno cancellati.')) return;
            
            clearInterval(timerInterval);
            timeRemaining = totalTime;
            startTimer();
            
            ['task1Text', 'task2Text', 'task3Text'].forEach(id => {
                const el = document.getElementById(id);
                el.value = '';
                el.readOnly = false;
                el.style.background = 'white';
                el.style.borderColor = '#d4d4c8';
                localStorage.removeItem('ise4_rw_' + id);
            });
            
            completedTasks = 0;
            taskScores = {};
            document.getElementById('finalFeedback').classList.remove('show');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function saveResults() {
            const avg = Math.round((taskScores[1] + taskScores[2] + taskScores[3]) / 3);
            
            // Send to parent window
            window.parent.postMessage({
                action: 'completeModule',
                module: 'ISE IV - Reading & Writing',
                score: avg + '%',
                breakdown: taskScores,
                timeUsed: (3 * 3600 - timeRemaining)
            }, '*');
            
            alert('‚úì Risultati inviati al registro!');
        }

        // Helper functions
        function checkSourcesUsed(taskNum) {
            const text = document.getElementById('task' + taskNum + 'Text').value.toLowerCase();
            const hasSourceA = text.includes('source a') || text.includes('text a') || text.includes('economist');
            const hasSourceB = text.includes('source b') || text.includes('text b') || text.includes('journal');
            
            if (hasSourceA && hasSourceB) {
                alert('‚úì Ottimo! Hai citato entrambe le fonti.');
            } else {
                alert('‚ö†Ô∏è Ricorda di citare esplicitamente entrambe le fonti (Source A/Text A e Source B/Text B) nella tua sintesi.');
            }
        }

        function compareTransformation() {
            const original = "empirical investigation neuroplasticity adult language acquisition conventional pedagogical methodologies underestimate cognitive capabilities mature learners";
            const transformed = document.getElementById('task2Text').value.toLowerCase();
            
            const simplified = ['research shows', 'brain', 'adult learning', 'traditional teaching', 'underestimate', 'abilities', 'older students'];
            const found = simplified.filter(term => transformed.includes(term)).length;
            
            if (found >= 4) {
                alert('‚úì Buon lavoro! Hai semplificato il linguaggio accademico per un audience non-specialista.');
            } else {
                alert('‚ö†Ô∏è Ricorda di trasformare il linguaggio specialistico (es. "neuroplasticity" ‚Üí "brain adaptability", "pedagogical methodologies" ‚Üí "teaching methods").');
            }
        }

        function checkArgumentStructure() {
            const text = document.getElementById('task3Text').value.toLowerCase();
            
            const hasAcknowledgment = text.includes('merit') || text.includes('valid') || text.includes('correctly identifies');
            const hasCritique = text.includes('however') || text.includes('but') || text.includes('overlooks') || text.includes('conflates');
            const hasSynthesis = text.includes('not mutually exclusive') || text.includes('both') || text.includes('integrate') || text.includes('constitutive');
            
            let feedback = 'Analisi struttura argomentativa:\n\n';
            feedback += hasAcknowledgment ? '‚úì Acknowledgment della proposta\n' : '‚ö†Ô∏è Manca acknowledgment iniziale\n';
            feedback += hasCritique ? '‚úì Elemento di critica/nuance\n' : '‚ö†Ô∏è Aggiungi elementi di critica\n';
            feedback += hasSynthesis ? '‚úì Sintesi superiore (terza posizione)\n' : '‚ö†Ô∏è Sviluppa una posizione che vada oltre il binario\n';
            
            alert(feedback);
        }
    </script>

</body>
</html>
